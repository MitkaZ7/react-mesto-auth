{"version":3,"sources":["utils/Api.js","utils/Auth.js","components/Login.js","components/Register.js","components/ProtectedRoute.js","images/success.svg","images/fail.svg","components/InfoTooltip.js","contexts/CurrentUserContext.js","images/logo.svg","components/Header.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/ImagePopup.js","components/EditAvatarPopup.js","components/EditProfilePopup.js","components/AddPlacePopup.js","components/App.js","reportWebVitals.js","index.js"],"names":["api","url","token","this","_url","_token","res","ok","json","Promise","reject","status","fetch","method","headers","authorization","then","_checkResponse","data","body","JSON","stringify","name","about","avatar","placeName","link","imageUrl","cardId","isLiked","checkResponse","Login","onSubmit","useState","email","setEmail","password","setPassword","className","evt","preventDefault","onChange","target","value","type","placeholder","id","required","maxLength","minLength","Register","handleRegistration","path","to","ProtectedRoute","Component","component","props","loggedIn","InfoTooltip","isOpen","onClose","isSuccess","onClick","src","success","fail","alt","CurrentUserContext","React","createContext","Header","onSignOut","logo","exact","Card","currentUser","useContext","isOwn","card","owner","_id","likes","some","myLike","buttonLikeClassName","buttonDeleteClassName","onCardDelete","onCardClick","style","backgroundImage","onCardLike","length","Main","onEditAvatar","onEditProfile","onAddCard","cards","map","Footer","Date","getFullYear","PopupWithForm","action","title","children","buttonTitle","ImagePopup","EditAvatarPopup","userAvatar","useRef","useEffect","current","onUpdateAvatar","ref","EditProfilePopup","setUserName","description","setDescription","onUpdateUser","AddPlacePopup","onAddPlace","setPlaceName","setImageUrl","App","setCurrentUser","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isAddCardPopupOpen","setIsAddCardPopupOpen","selectedCard","setSelectedCard","setCards","setLoggedIn","isSuccessSignUp","setIsSuccessSignUp","isInfoTooltipOpen","setIsInfoTooltipOpen","history","useHistory","handleInfoTooltipOpen","handleCheckToken","localStorage","getItem","Accept","Authorization","authApi","push","catch","error","console","log","handleSignOut","removeItem","closeAllPopups","getUserInfo","getInitialCards","document","addEventListener","key","Provider","likeCard","newCard","c","removeCard","filter","logOut","setItem","onCheckToken","userProfile","editUserInfo","addNewCard","editUserAvatar","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.ced74559.chunk.js","sourcesContent":["class Api {\n  constructor(url, token) {\n    this._url = url;\n    this._token = token;\n  }\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n    } else {\n      return Promise.reject(`Ошибка ${res.status}`);\n    }\n  }\n  getUserInfo() {\n    return fetch(`${this._url}users/me`, {\n      method: 'GET',\n      headers: {\n        authorization: this._token\n      }\n    })\n    .then(this._checkResponse)\n  }\n  getInitialCards() {\n    return fetch(`${this._url}cards`, {\n      method: 'GET',\n      headers: {\n        authorization: this._token\n      }\n    })\n    .then(this._checkResponse)\n  }\n  editUserInfo(data) {\n    return fetch(`${this._url}users/me`, {\n      method:'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: data.name,\n        about: data.about\n      })\n    })\n    .then(this._checkResponse)\n  }\n  editUserAvatar(data) {\n    return fetch(`${this._url}users/me/avatar`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        avatar: data.avatar\n      })\n    })\n      .then(this._checkResponse)\n  }\n  addNewCard(data) {\n    return fetch(`${this._url}cards`, {\n      method: 'POST',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: data.placeName,\n        link: data.imageUrl\n      })\n    })\n    .then(this._checkResponse)\n  }\n  likeCard(cardId, isLiked) {\n    return fetch(`${this._url}cards/likes/${cardId}`, {\n      method: `${!isLiked ? 'PUT' : 'DELETE'}`,\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      }\n    })\n    .then(this._checkResponse)\n  }\n  removeCard(cardId) {\n    return fetch(`${this._url}cards/${cardId}`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      }\n    })\n      .then(this._checkResponse)\n  }\n}\nconst api = new Api('https://nomoreparties.co/v1/cohort-26/', '2ceacd5c-fca2-4318-a334-9732db7cb6fc');\nexport default api;\n","export const url = \"https://auth.nomoreparties.co\";\n\nconst checkResponse = (res) =>\n  res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`);\n\nexport const register = (email, password) => {\n  return fetch(`${url}/signup`, {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ email, password }),\n  }).then(checkResponse);\n};\n\nexport const authorize = ({ password, email }) => {\n  return fetch(`${url}/signin`, {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ email, password }),\n  }).then(checkResponse);\n};\n\nexport const checkToken = (token) => {\n  return fetch(`${url}/users/me`, {\n    method: \"GET\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`,\n    },\n  }).then(checkResponse);\n};\n","import React, {useState} from 'react';\n\nexport default function Login({onSubmit}) {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  function handleСhangeEmail(evt) {\n    setEmail(evt.target.value);\n  }\n  function handleChangePassword(evt) {\n    setPassword(evt.target.value);\n  }\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    onSubmit({password, email});\n  }\n  return (\n    <form className=\"popup__authorization\" onSubmit={handleSubmit}>\n      <h3 className=\"popup__title popup__title_place_login\">Вход</h3>\n      <input className=\"popup__form-input popup__form-input_type_authorization-data\" onChange={handleСhangeEmail} type=\"email\" value={email} placeholder=\"Email\" id=\"inputEmail\" required></input>\n      <input className=\"popup__form-input popup__form-input_type_authorization-data\" onChange={handleChangePassword} type=\"password\" value={password} placeholder=\"Пароль\" id=\"imputPassword\" required maxLength=\"40\" minLength=\"2\"></input>\n      <button className=\"popup__button-submit button button_type_login\">Войти</button>\n    </form>\n  )\n}\n","import React, {useState, useEffect} from 'react';\nimport { Link, Route } from 'react-router-dom';\n\nexport default function Register({onSubmit}) {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n\n\n  function handleChangeEmail(evt) {\n    setEmail(evt.target.value);\n  }\n  function handleChangePassword(evt) {\n    setPassword(evt.target.value);\n  }\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    onSubmit.handleRegistration(email, password);\n  }\n    return (\n      <form name=\"popup-form\" className=\"popup__authorization\" onSubmit={handleSubmit}>\n        <h3 className=\"popup__title popup__title_place_login\">Регистрация</h3>\n        <input className=\"popup__form-input popup__form-input_type_authorization-data\" onChange={handleChangeEmail} type=\"email\" value={email} placeholder=\"Email\" id=\"inputEmail\" required></input>\n        <input className=\"popup__form-input popup__form-input_type_authorization-data\" onChange={handleChangePassword} type=\"password\" value={password} placeholder=\"Пароль\" id=\"imputPassword\" required></input>\n        <button className=\"popup__button-submit button button_type_login\">Зарегистрироваться</button>\n          <div className=\"popup__redirect-container\">\n            <Route path=\"/sign-up\">\n              <Link className=\"popup__redirect-link\" to=\"/sign-in\">Уже зарегистрированы? Войти</Link>\n            </Route>\n          </div>\n      </form>\n    )\n}\n","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nexport default function ProtectedRoute({component: Component, ...props}) {\n    return (\n        <Route>\n           {props.loggedIn ? <Component {...props} /> : <Redirect to='/sign-in'/>}\n        </Route>\n    )\n}\n","export default __webpack_public_path__ + \"static/media/success.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/fail.df8eddf6.svg\";","import React from 'react';\nimport success from '../images/success.svg'\nimport fail from '../images/fail.svg';\n\nexport default function InfoTooltip({ isOpen, onClose, isSuccess }) {\n  return (\n    <>\n      <div className={isOpen ? 'popup popup_status_opened' : 'popup'}>\n        <div className=\"popup__container popup__cointainer_place_infoToolTip\" onClick={onClose}>\n          <form className=\"popup__form\">\n            <fieldset className=\"popup__fieldset popup__filedset_place_infoToolTip\">\n              <button className=\"popup__button-close button\" type=\"button\"/>\n              <img className=\"popup__image-authorization\" src={`${isSuccess ? success : fail}`} alt=\"иконка статуса регистрации\" />\n              <h3 className=\"popup__title popup__title_place_infoTooltip\">\n                {`${isSuccess ? 'Вы успешно зарегистрировались!' : 'Что-то пошло не так! Попробуйте еще раз.'}`}\n              </h3>\n            </fieldset>\n          </form>\n        </div>\n      </div>\n    </>\n  )\n}\n","import React from 'react';\nexport const CurrentUserContext = React.createContext();\n","export default __webpack_public_path__ + \"static/media/logo.03b78ada.svg\";","import React from 'react';\nimport logo from '../images/logo.svg';\nimport { Link, Route } from 'react-router-dom';\n\nexport default function Header({loggedIn, email, onSignOut}) {\n  return (\n    <header className=\"header\">\n      <img src={logo} alt=\"логотип\" className=\"header__logo\" />\n        <div className=\"header__login\">\n          {loggedIn && (\n            <>\n              <p className=\"header__user-email\">{email}</p>\n                <Route exact path=\"/\">\n                  <Link className=\"header__button-logout\" to=\"/sign-in\" onClick={onSignOut}>Выйти</Link>\n                </Route>\n            </>\n          )}\n          <Route path=\"/sign-in\">\n            <Link className=\"header__link\" to=\"/sign-up\">\n              Регистрация\n            </Link>\n          </Route>\n          <Route path=\"/sign-up\">\n            <Link className=\"header__link\" to=\"/sign-in\">\n              Вход\n            </Link>\n          </Route>\n        </div>\n    </header>\n  )\n}\n","import React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nexport default function Card(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n  const isOwn = props.card.owner._id === currentUser._id;\n  const isLiked = props.card.likes.some(myLike => myLike._id === currentUser._id);\n  const buttonLikeClassName = (`button_type_like ${isLiked ? 'button_type_like-active' : ''}`);\n  const buttonDeleteClassName = (`place__button-remove ${isOwn ? 'place__button-remove_status-active' : ''}`);\n  function handleClick() {\n    props.onCardClick(props.card);\n  }\n  function handleLikeClick() {\n    props.onCardLike(props.card);\n  }\n  function handleDeleteClick() {\n    props.onCardDelete(props.card);\n  }\n\n    return (\n        <li className=\"place\">\n        {isOwn && <button className={buttonDeleteClassName} onClick={handleDeleteClick}></button>}\n            <figure className=\"place__card\">\n                <div className=\"place__image\" onClick={handleClick} style={{ backgroundImage: `url(${props.card.link})`}}></div>\n                <figcaption className=\"place__caption\">\n                    <h2 className=\"place__name\">{props.card.name}</h2>\n                    <div className=\"place__like-container\">\n              <button className={buttonLikeClassName} type=\"button\" onClick={handleLikeClick}></button>\n                        <span className=\"place__counter-likes\">{props.card.likes.length}</span>\n                    </div>\n                </figcaption>\n            </figure>\n        </li>\n    )\n}\n\n","import React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport Card from './Card';\nfunction Main(props) {\n    const currentUser = React.useContext(CurrentUserContext);\n    return (\n        <main className=\"content\">\n            <section className=\"profile\">\n                <div className=\"profile__card\">\n                    <div className=\"profile__avatar-container\">\n              <div className=\"profile__avatar\" style={{ backgroundImage: `url(${currentUser.avatar})` }}></div>\n                        <button className=\"profile__button-edit-avatar\" type=\"button\" onClick={props.onEditAvatar}></button>\n                    </div>\n                    <div className=\"profile__info\">\n                        <h1 className=\"profile__name\">{currentUser.name}</h1>\n                        <button className=\"profile__button-edit button button_type_edit\" type=\"button\" onClick={props.onEditProfile}></button>\n                        <p className=\"profile__about\">{currentUser.about}</p>\n                    </div>\n                </div>\n                <button className=\"profile__button-add button button_type_add\" type=\"button\" onClick={props.onAddCard}></button>\n            </section>\n            <section className=\"places\">\n                <ul className=\"places__cards\">\n                {props.cards.map((card) => {\n                  return (<Card key={card._id} card={card} onCardClick={props.onCardClick} onCardLike={props.onCardLike} onCardDelete={props.onCardDelete}/>)\n                })}\n                </ul>\n            </section>\n        </main>\n    )\n}\nexport default Main;\n","import React from 'react';\nfunction Footer() {\n    return (\n        <footer className=\"footer\">\n        <p className=\"footer__copyright\">&copy; {new Date().getFullYear()} Mesto Russia</p>\n        </footer>\n    )\n}\nexport default Footer;\n\n","import React from 'react';\nexport default function PopupWithForm({ isOpen, onClose, onSubmit, ...props }) {\n  return (\n    <div className={`popup popup_type_${props.name} ${isOpen ? \"popup_status_opened\" : \"\"}`}>\n      <div className=\"popup__container\">\n        <button className=\"popup__button-close button\" type=\"button\" onClick={onClose}></button>\n        <form action=\"#\" name=\"popup-form\" className=\"popup__form\" onSubmit={onSubmit}>\n          <h3 className=\"popup__title\">{props.title}</h3>\n          <fieldset className=\"popup__fieldset\">\n            {props.children}\n          </fieldset>\n          <button type=\"submit\" className=\"popup__button-submit button button_type_save\">{props.buttonTitle}</button>\n        </form>\n      </div>\n    </div>\n  )\n}\n\n","import React from 'react';\nfunction ImagePopup(props) {\n    return (\n      <div className={`popup popup_type_image ${props.card._id ? \"popup_status_opened\" : \"\"} `}>\n            <div className=\"popup__image-container\">\n                <button className=\"popup__button-close button\" type=\"button\" onClick={props.onClose}></button>\n                <figure className=\"popup__caption-container\">\n                    <img src={props.card.link} alt={props.card.name} className=\"popup__image\" />\n                    <figcaption className=\"popup__caption\">\n                        <h2 className=\"popup__place-caption\">{props.card.name}</h2>\n                    </figcaption>\n                </figure>\n            </div>\n        </div>\n    )\n}\n\nexport default ImagePopup;\n","import React, { useEffect } from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nexport default function EditAvatarPopup(props) {\n  const userAvatar = React.useRef();\n  // очистка инпута при открытии\n  useEffect(() => {\n    userAvatar.current.value = '';\n    }, [props.isOpen]);\n  //\n  function handleEditAvatarSubmit(evt) {\n    evt.preventDefault();\n    props.onUpdateAvatar({\n      avatar: userAvatar.current.value\n    });\n\n  }\n  return (\n    <PopupWithForm name=\"edit-avatar\" title=\"Обновить аватар\" isOpen={props.isOpen} onClose={props.onClose} buttonTitle=\"Сохранить\" onSubmit={handleEditAvatarSubmit}>\n      <input ref={userAvatar} id=\"avatar-input\" type=\"url\" className=\"popup__form-input popup__form-input_type_avatar-url\" placeholder=\"Ссылка на аватар\" name=\"avatar\" required />\n      <span className=\"popup__input-error input-avatar-url-error\"></span>\n    </PopupWithForm>\n  )\n}\n","import React, { useState } from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport PopupWithForm from './PopupWithForm';\n\n\nexport default function EditProfilePopup(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n  const [name, setUserName] = useState('');\n  const [description, setDescription] = useState('');\n\n  React.useEffect(() => {\n    setUserName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser]);\n\n  function handleChangeName(evt) {\n    setUserName(evt.target.value)\n  }\n  function handleDescriptionChange(evt) {\n    setDescription(evt.target.value);\n  }\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    props.onUpdateUser({\n      name,\n      about: description,\n    });\n  }\n  return (\n    <PopupWithForm name=\"profile-edit\" title=\"Редактировать профиль\" isOpen={props.isOpen} onClose={props.onClose} onClick={props.onClick} buttonTitle=\"Сохранить\" onSubmit={handleSubmit}>\n      <input onChange={handleChangeName} id=\"inputName\" type=\"text\" className=\"popup__form-input popup__form-input_type_name\" name=\"name\" placeholder=\"Имя\" minLength=\"2\" maxLength=\"40\" required value={props.name}/>\n      <span className=\"popup__input-error inputName-error\"></span>\n      <input onChange={handleDescriptionChange} id=\"inputAbout\" type=\"text\" className=\"popup__form-input popup__form-input_type_job\" name=\"about\" placeholder=\"Чем вы занимаетесь?\" minLength=\"2\" maxLength=\"200\" required  value={props.about}/>\n      <span className=\"popup__input-error inputAbout-error\"></span>\n    </PopupWithForm>\n  )\n}\n","import React, { useEffect } from 'react';\nimport PopupWithForm from './PopupWithForm';\nexport default function AddPlacePopup({ isOpen, onClose, onAddPlace}) {\n  const [placeName, setPlaceName] = React.useState('');\n  const [imageUrl, setImageUrl] = React.useState('');\n\n  useEffect(() => {\n    setPlaceName('');\n    setImageUrl('');\n\n  }, [isOpen])\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    onAddPlace({\n      placeName: placeName,\n      imageUrl: imageUrl\n    })\n  }\n  function handleChangePlaceName(evt) {\n    setPlaceName(evt.target.value);\n  }\n  function handleChangeImageUrl(evt) {\n    setImageUrl(evt.target.value);\n  }\n  return (\n    <PopupWithForm name=\"add-place\" title=\"Новое место\" isOpen={isOpen} onClose={onClose} buttonTitle=\"Создать\" onSubmit={handleSubmit} >\n      <input value={placeName} id=\"input-place-name\" type=\"text\" className=\"popup__form-input popup__form-input_type_place-name\" placeholder=\"Название\" name=\"placeName\" minLength=\"2\" maxLength=\"30\" required onChange={handleChangePlaceName}/>\n      <span className=\"popup__input-error input-place-name-error\"></span>\n      <input value={imageUrl} id=\"input-image-url\" type=\"url\" className=\"popup__form-input popup__input_place-link\" placeholder=\"Ссылка на картинку\" name=\"imageUrl\" required onChange={handleChangeImageUrl}/>\n      <span className=\"popup__input-error input-image-url-error\"></span>\n    </PopupWithForm>\n  )\n}\n","import React, { useEffect } from 'react';\nimport { Route, Switch, useHistory, Redirect } from 'react-router-dom';\nimport api from '../utils/Api';\nimport * as authApi from '../utils/Auth';\nimport Login from './Login';\nimport Register from './Register';\nimport ProtectedRoute from './ProtectedRoute';\nimport InfoTooltip from './InfoTooltip';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport PopupWithForm from './PopupWithForm';\nimport ImagePopup from './ImagePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport EditProfilePopup from './EditProfilePopup';\nimport AddPlacePopup from './AddPlacePopup';\nfunction App() {\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isAddCardPopupOpen, setIsAddCardPopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [email, setEmail] = React.useState('');\n  const [isSuccessSignUp, setIsSuccessSignUp] = React.useState(false);\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = React.useState(false);\n  const history = useHistory();\n\n  const handleEditProfileClick = () => {\n    setIsEditProfilePopupOpen(true);\n  }\n  const handleEditAvatarClick = () => {\n    setIsEditAvatarPopupOpen(true);\n  }\n  const handleAddPlaceClick = () => {\n    setIsAddCardPopupOpen(true);\n  }\n  const handleCardClick = (card) => {\n    setSelectedCard(card);\n  }\n  function handleInfoTooltipOpen() {\n    setIsInfoTooltipOpen(!isInfoTooltipOpen);\n  }\n  function handleCheckToken() {\n    const token = localStorage.getItem('jwt');\n    if (token) {\n      authApi.checkToken(token)\n      .then((res) => {\n        if (res.data.email) {\n          setEmail(res.data.email);\n          setLoggedIn(true);\n          history.push('/');\n        }\n      })\n      .catch((error) => {\n        console.log('Не удалось авторизоваться' + error);\n      })\n    }\n  }\n  useEffect(() => {\n    handleCheckToken();\n  }, []);\n  // registration\n  function handleRegistration(email, password) {\n    authApi.register(email, password)\n    .then((res) => {\n      if (res.data) {\n        setIsSuccessSignUp(true);\n        handleInfoTooltipOpen();\n        history.push('/sign-in');\n      }\n    })\n    .catch((error) => {\n      setIsSuccessSignUp(false);\n      handleInfoTooltipOpen();\n      console.log('Не удалось зарегистрироваться' + error);\n    })\n  }\n  // auth\n  function handleLogin ({email, password}) {\n    authApi.authorize({email, password})\n    .then((res) => {\n      if (res.token) {\n        setEmail(email);\n        setLoggedIn(true);\n        localStorage.setItem('jwt', res.token);\n        history.push('/');\n      }\n    })\n    .catch((error) => {\n      console.log('Авторизация не прошла' + error);\n    })\n  }\n  //logout\n  function handleSignOut() {\n    localStorage.removeItem('jwt');\n    setEmail('');\n    setLoggedIn(false);\n    history.push('/sign-in');\n  }\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsAddCardPopupOpen(false);\n    setIsInfoTooltipOpen(false);\n    setSelectedCard({});\n  }\n  function handleUpdateAvatar(avatar) {\n    api\n      .editUserAvatar(avatar)\n      .then((res) => {\n        setCurrentUser(res)\n        closeAllPopups()\n      })\n      .catch((error) => {\n        console.log('Ошибка, аватар не поменялся');\n    })\n  }\n  function handleUpdateProfile(userProfile) {\n    api\n      .editUserInfo(userProfile)\n      .then((res) => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch((error) => {\n        console.log('Ошибка, данные пользователя не поменялись');\n      })\n  }\n  useEffect(() => {\n    api\n      .getUserInfo()\n      .then((res) => {\n        setCurrentUser(res);\n      })\n      .catch((error) => {\n        console.log('Ошибка, данные пользователя не загрузились');\n      })\n  }, []);\n  function handleAddPlaceSumbmit(card) {\n    api\n      .addNewCard(card)\n      .then((res) => {\n        setCards([res, ...cards]);\n        closeAllPopups();\n      })\n      .catch((error) => {\n        console.log('Ошибка, не удалось добавить новую карточку');\n      })\n  }\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(myLike => myLike._id === currentUser._id);\n    api\n      .likeCard(card._id, isLiked)\n      .then((newCard) => {\n      setCards((cards) => cards.map((c) => c._id === card._id ? newCard : c));\n    })\n      .catch((error) => {\n        console.log('Ошибка установки лайка');\n      });\n  }\n\n  function handleCardDelete(card) {\n      api\n      .removeCard(card._id)\n        .then(() => {\n          setCards(cards.filter((c) => c._id !== card._id))\n          closeAllPopups();\n        })\n        .catch((error) => {\n          console.log('Ошибка удаления карточки');\n        })\n  }\n\n  useEffect(() => {\n    api\n      .getInitialCards()\n      .then((res) => {\n        setCards(res);\n      })\n      .catch((error) => {\n        console.log('Ошибка, карточки н загрузились');\n      })\n  }, []);\n\n  React.useEffect(() => {\n    function handleEscClose(evt) {\n      if (evt.key === 'Escape') {\n        closeAllPopups()\n      }\n    }\n    document.addEventListener('keyup', handleEscClose);\n  }, []);\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <Header email={email} loggedIn={loggedIn} onSignOut={handleSignOut} />\n        <Switch>\n          <ProtectedRoute\n          exact\n          path=\"/\"\n          component={Main}\n          onEditProfile={handleEditProfileClick}\n          onAddCard={handleAddPlaceClick}\n          onEditAvatar={handleEditAvatarClick}\n          onCardClick={handleCardClick}\n          onCardLike={handleCardLike}\n          onCardDelete={handleCardDelete}\n          cards={cards}\n          loggedIn={loggedIn}\n          logOut={handleSignOut}\n          />\n          <Route path=\"/sign-up\">\n            <Register onSubmit={handleRegistration}/>\n          </Route>\n          <Route path=\"/sign-in\">\n            <Login onSubmit={handleLogin}\n              onCheckToken={handleCheckToken} />\n          </Route>\n          <Route path=\"/\">\n            {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/sign-in\" />}\n          </Route>\n        </Switch>\n        <Footer />\n      </div>\n      <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateProfile}></EditProfilePopup>\n      <AddPlacePopup isOpen={isAddCardPopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlaceSumbmit}></AddPlacePopup>\n      <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar}></EditAvatarPopup>\n      <PopupWithForm name=\"remove-card\" title=\"Вы уверены?\" onClose={closeAllPopups} buttonTitle=\"Да\" />\n      <ImagePopup card={selectedCard} onClose={closeAllPopups}/>\n      <InfoTooltip isOpen={isInfoTooltipOpen} onClose={closeAllPopups} isSuccess={isSuccessSignUp}/>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}